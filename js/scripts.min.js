var map,link=document.querySelector(".feedback-js"),feedback=document.querySelector(".modal-feedback"),close=feedback.querySelector(".close-modal"),uname=feedback.querySelector("[name=feedback-username]"),form=feedback.querySelector("form"),email=feedback.querySelector("[name=feedback-email]"),overlay=document.querySelector(".overlay"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("uname")}catch(e){isStorageSupport=!1}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:-34.397,lng:150.644},zoom:8})}function initMap(){var e=new google.maps.Map(document.getElementById("map"),{zoom:17,center:{lat:59.938867,lng:30.322962},zoomControl:!1,scaleControl:!0});new google.maps.Marker({position:{lat:59.938867,lng:30.322962},map:e,animation:google.maps.Animation.DROP,icon:"img/icon-pin-map.png"});marker.addListener("click",toggleBounce)}function toggleBounce(){null!==marker.getAnimation()?marker.setAnimation(null):marker.setAnimation(google.maps.Animation.BOUNCE)}overlay.addEventListener("click",function(e){feedback.classList.remove("modal-error"),feedback.classList.remove("modal-show"),overlay.classList.remove("overlay-show"),document.body.style.overflow="auto"}),link.addEventListener("click",function(e){e.preventDefault(),feedback.classList.add("modal-show"),overlay.classList.add("overlay-show"),document.body.style.overflow="hidden",storage?(uname.value=storage,email.focus()):uname.focus()}),close.addEventListener("click",function(e){e.preventDefault(),feedback.classList.remove("modal-error"),feedback.classList.remove("modal-show"),overlay.classList.remove("overlay-show"),document.body.style.overflow="auto"}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),feedback.classList.contains("modal-show")&&(feedback.classList.remove("modal-show"),overlay.classList.remove("overlay-show"),document.body.style.overflow="auto"))}),form.addEventListener("submit",function(e){email.value&&uname.value?isStorageSupport&&localStorage.setItem("uname",uname.value):(e.preventDefault(),feedback.classList.remove("modal-error"),feedback.offsetWidth=feedback.offsetWidth,feedback.classList.add("modal-error"))});
